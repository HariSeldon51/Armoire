<!DOCTYPE html>
<html>
<head>
    <!-- Imports polymer -->
    <link rel="import" href="../bower_components/polymer/polymer.html">
    <link href="../bower_components/iron-pages/iron-pages.html" rel="import">
    <link href="../bower_components/paper-tabs/paper-tabs.html" rel="import">
    <link href="../bower_components/paper-card/paper-card.html" rel="import">
    <link href="../bower_components/paper-button/paper-button.html" rel="import">
    <link href="../elements/isca-widget.html" rel="import">
</head>

<!-- Defines element markup -->
<dom-module id="idex-oppform">
    
    <template>        
        <style>
            paper-tabs {
                --paper-tabs-selection-bar-color: #E59740;
            }
            paper-tab {
                background-color: #196426;
                color: #fff;
                --paper-tab-ink: #A4D4A8;
            }
            paper-tab.iron-selected {
                color: #E59740;
            }
        </style>
                
        <isca-widget>
            <paper-card class="support-form" >
                <form action=""> 
                    <paper-tabs selected="{{selected}}">
                        <paper-tab>Start</paper-tab>
                        <paper-tab>Customer Info</paper-tab>
                        <paper-tab>Opportunity Info</paper-tab>
                    </paper-tabs>

                    <iron-pages selected="{{selected}}" 
                                on-iron-select="_pageSelectHandler"
                                id="idexpages">

                        <div>
                            <div class="page">
                            <fieldset id="start">
                                <legend for="start" class="heading"><h2>Registration Type:</h2></legend>
                                <p>What kind of registration would you like to submit to Dassault? (Note that you can select both if needed):</p>
                                <input type="checkbox" id="clienttest" value="opp" checked />Opportunity Registration<br />
                                <input type="checkbox" id="vanillatest" value="site" />Site Registration<br />
                            </fieldset>
                            <fieldset id="contact">
                                <legend for="contact" class="heading"><h2>Partner/Account Rep. Information:</h2></legend>
                                <div class="group">
                                    <div class="item long"><legend for="partnername">Partner Name:</legend><input type="text" id="name" value="Idex Solutions"/></div>
                                    <div class="item half"><legend for="first">Account Rep. First Name:</legend><input type="text" id="firstname" value="" on-input="handleInput" /></div>
                                    <div class="item half"><legend for="last">Account Rep. Last Name:</legend><input type="text" id="lastname" value="" on-input="handleInput" /></div>
                                    <div class="item long"><legend for="email">Account Rep. Email Address:</legend><input type="email" id="email" value="[[repemail]]"/></div>
                                </div>
                            </fieldset>
                            </div>
                        </div>

                        <div>
                            <div class="page">
                            <fieldset id="customer">
                                <legend for="customer" class="heading"><h2>Company Information:</h2></legend>
                                <div class="group">
                                    <div class="item long"><legend for="compname">Company Name:</legend><input type="text" id="compname" /></div>
                                    <div class="item half"><legend for="dsid">DS Site ID:</legend><input type="text" id="dsid" /></div>
                                    <div class="item half"><legend for="idexid">SalesLogix Account ID:</legend><input type="text" id="idexid" /></div>
                                </div>
                            </fieldset>
                            <fieldset id="thirdpartyid">
                                <legend for="thirdpartyid" class="heading"><h2>Third Party ID (only one of the following must be entered):</h2></legend>
                                <div class="group">
                                    <div class="item third"><legend for="duns">DUNS Number:</legend><input type="text" id="duns" /></div>
                                    <div class="item third"><legend for="VAT">VAT Number:</legend><input type="text" id="vat" /></div>
                                    <div class="item third"><legend for="local">Local Registration ID:</legend><input type="text" id="local" /></div>
                                </div>
                            </fieldset>
                            <fieldset id="address">
                                <legend for="address" class="heading"><h2>Site Address:</h2></legend>
                                <div class="group">
                                    <div class="item long"><legend for="address1">Street Address 1:</legend><input type="text" id="address1" /></div>
                                    <div class="item long"><legend for="address2">Street Address 2:</legend><input type="text" id="address2" /></div>
                                    <div class="item third"><legend for="city">City:</legend><input type="text" id="city" /></div>
                                    <div class="item third"><legend for="state">Full State:</legend><input type="text" id="state" /></div>
                                    <div class="item third"><legend for="zip">Zip Code:</legend><input type="text" id="zip" /></div>
                                    <div class="item long"><legend for="webaddress">Website:</legend><input type="text" id="webaddress" /></div>
                                </div>
                            </fieldset>
                            <fieldset id="contact">
                                <legend for="contact" class="heading"><h2>Main Contact:</h2></legend>
                                <div class="group">
                                    <div class="item"><legend for="salut">Salutation:</legend><select id="salut">
                                        <option value="mr">Mr.</option>
                                        <option value="ms">Ms.</option>
                                        <option value="mr.">Mrs.</option>
                                        <option value="dr">Dr.</option>
                                        </select></div>
                                    <div class="item third"><legend for="firstname">First Name:</legend><input type="text" id="firstname" /></div>
                                    <div class="item third"><legend for="lastname">Last Name:</legend><input type="text" id="lastname" /></div>
                                    <div class="item third"><legend for="city">City:</legend><input type="text" id="city" /></div>
                                    <div class="item third"><legend for="title">Job Title:</legend><input type="text" id="title" /></div>
                                    <div class="item half"><legend for="phone">Telephone:</legend><input type="tel" id="phone" /></div>
                                    <div class="item half"><legend for="email">Email:</legend><input type="email" id="email" /></div>
                                </div>
                            </fieldset>
                            </div>
                        </div>

                        <div>
                            <div class="page">
                            <fieldset id="opportunity">
                                <legend for="opportunity" class="heading"><h2>Opportunity ID:</h2></legend>
                                <div class="group">
                                    <div class="item long"><legend for="opplead">[[leadname]]</legend><input type="text" id="opplead" /></div>
                                    <div class="item long"><legend for="address2">Street Address 2:</legend><input type="text" id="address2" /></div>
                                    <div class="item third"><legend for="city">City:</legend><input type="text" id="city" /></div>
                                    <div class="item third"><legend for="state">Full State:</legend><input type="text" id="state" /></div>
                                    <div class="item third"><legend for="zip">Zip Code:</legend><input type="text" id="zip" /></div>
                                    <div class="item long"><legend for="webaddress">Website:</legend><input type="text" id="webaddress" /></div>
                                </div>
                            </fieldset>
                            </div>
                        </div>

                    </iron-pages>
                    <div class="process-nav">
                        <paper-button id="proceedbutton" on-tap="_handleNext" class="boldbutton" raised>Next</paper-button>
                        <paper-button id="returnbutton" on-tap="_handleBack" class="subtlebutton" raised hidden >Back</paper-button>
                    </div>

                </form>
        
            </paper-card>
        </isca-widget>
        
               
    </template>
    
    <!-- Registers custom element -->
    <script>
    Polymer({
        is: 'idex-oppform',
        
        properties: {
            selected: {
                type: String,
                value: "0"
            },
            firstname: {
                type: String,
                notify: true,
                value: ""
            },
            lastname: {
                type: String,
                notify: true,
                value: ""
            },
            repemail: {
                type: String,
                computed: 'computeEmail(firstname, lastname)',
                notify: true
            }
        },
        
        computeEmail: function(first, last) {
            return first + last + '@idexsolutions.com';
        },
        
        handleInput: function(e) {
            if(e.target.getAttribute("id") == "firstname"){
                this.firstname = e.target.value;
            } else if (e.target.getAttribute("id") == "lastname"){
                this.lastname = e.target.value;
            }
        },
        
        _pageSelectHandler: function() {
            if (this.selected > 0) {
                this.$.returnbutton.removeAttribute("hidden");
            } else { this.$.returnbutton.setAttribute("hidden", true); }
            
            if (this.selected >= (this.$.idexpages.items.length - 1)) {
                this.$.proceedbutton.setAttribute("hidden", true);
            } else { 
                this.$.proceedbutton.removeAttribute("hidden");
            }
        },
        
        _handleNext: function() {
            this.selected++;
        },
        
        _handleBack: function() {
            this.selected--;
        },
    
        // Fires when an instance of the element is created
        created: function() {
        },
    
        // Fires when the local DOM has been fully prepared
        ready: function() {},
    
        // Fires when the element was inserted into the document
        attached: function() {},
    
        // Fires when the element was removed from the document
        detached: function() {},
    
        // Fires when an attribute was added, removed, or updated
        attributeChanged: function(name, type) {},
    });
    </script>
</dom-module>